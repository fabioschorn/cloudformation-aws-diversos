# PCI Vulnerability Management: Custom ETL Lambda Function

This CloudFormation template provisions an AWS Lambda function designed to perform a custom Extract, Transform, Load (ETL) process. The function extracts PCI vulnerability data from CSV files stored in an S3 bucket, transforms the data as needed, and loads it into a PostgreSQL database hosted on Amazon RDS. This automated process ensures that vulnerability data is efficiently processed and stored for further analysis.

## Architecture Overview

The solution comprises the following AWS components:

- **AWS Lambda Function**: Executes the ETL process by:
  - Extracting CSV files from a specified S3 bucket.
  - Transforming the data to match the schema of the target PostgreSQL database.
  - Loading the transformed data into the PostgreSQL database.

- **AWS Secrets Manager**: Securely stores the PostgreSQL database credentials, which the Lambda function retrieves at runtime to establish a secure connection.

- **AWS Identity and Access Management (IAM) Role**: Grants the Lambda function necessary permissions to:
  - Access and read from the S3 bucket.
  - Retrieve secrets from AWS Secrets Manager.
  - Connect to the RDS PostgreSQL instance.

## Prerequirements

Before deploying this CloudFormation stack, ensure the following resources are in place:

1. **Amazon S3 Bucket**: An existing S3 bucket containing the PCI vulnerability CSV files in the `output-processed/pci/` directory.

2. **Amazon RDS PostgreSQL Instance**: A PostgreSQL database instance configured to receive the transformed vulnerability data.

3. **AWS Secrets Manager Secret**: A secret storing the PostgreSQL database credentials in the following JSON format:

   ```json
   {
     "username": "your_db_username",
     "password": "your_db_password",
     "host": "your_db_host",
     "port": "5432",
     "database": "your_db_name"
   }