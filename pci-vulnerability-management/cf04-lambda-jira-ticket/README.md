# AWS Cross-Account Vulnerability Ticketing System

## Overview
This architecture outlines an AWS-based system for managing and tracking vulnerability reports using an **RDS PostgreSQL database** and **Jira ticketing integration**. The system operates across **two AWS accounts**, ensuring efficient data processing, secure database storage, and automated ticket creation with tracking.

## Components & Responsibilities
The following table describes the key components in this architecture:

| **Component**             | **Location**                          | **Function** |
|--------------------------|-------------------------------------|-------------|
| **Lambda #1 (DB Query Lambda)** | **Account 2 (Private Subnet)**  | Queries **RDS PostgreSQL** for new vulnerability records and sends them to **SQS** for further processing. |
| **SQS Queue**             | **Account 2** | Stores extracted vulnerability records to ensure reliable processing before sending them to Jira. |
| **Lambda #2 (Jira Ticket Lambda)** | **Account 2 (Shared Subnet from Account 1)** | Reads messages from **SQS**, creates **Jira tickets**, and updates the **RDS PostgreSQL database** with the Jira ticket number. |
| **RDS PostgreSQL**        | **Account 2** | Stores vulnerability records and tracks Jira ticket numbers to maintain a reference between database records and Jira issues. |

## Workflow
1️⃣ **Lambda #1 (DB Query Lambda)** fetches new vulnerabilities from **RDS PostgreSQL** and sends them to **SQS**.
2️⃣ **SQS Queue** stores the extracted data to prevent data loss and facilitate batch processing.
3️⃣ **Lambda #2 (Jira Ticket Lambda)** reads **SQS messages**, creates **Jira tickets**, and updates the RDS database in **Account 2** with the corresponding **Jira ticket numbers**.

## Benefits of This Approach
✅ **Scalability** → SQS ensures smooth message processing without overloading the system.
✅ **Reliability** → Messages are processed asynchronously, reducing system failures.
✅ **Security Best Practices** → Uses **AWS Secrets Manager** for database credentials.
✅ **Cross-VPC Access Managed** → Keeps **database queries within Account 2** while **Jira ticketing operates using Account 1’s shared subnet**.

## Summary
- This architecture automates **vulnerability tracking and Jira ticket creation**.
- It ensures that **each vulnerability record in RDS is associated with a Jira ticket**.
- The use of **SQS decouples database queries from Jira ticket creation**, improving reliability and scalability.

🚀 **Now your vulnerabilities in Account 2 are automatically tracked with Jira ticket numbers!** 🚀